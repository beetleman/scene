version: "2.2"

services:
  app:
    container_name: app-kovan
    build:
      context: .
    links:
      - kovan
      - redis
    ports:
      - "8000:8000"
    environment:
      - RPC_URL=http://kovan:8545
      - PORT=8000
      - CHUNK_SIZE=1000
      - REDIS_URL=redis://redis:6379/0

  kovan:
    image: parity/parity:v1.8.3
    container_name: parity-kovan
    cpu_count: 1
    cpu_percent: 50
    volumes:
      - chain:/root/.local/share/io.parity.ethereum
    ports:
      - "8180:8180"
      - "30303:30303"
      - "8546:8546"
    command: --chain kovan --unsafe-expose --fat-db on ui

  redis:
    container_name: redis-kovan
    image: redis:4-alpine

  redis-commander:
    container_name: redis-commander-kovan
    image: rediscommander/redis-commander:latest
    links:
      - redis
    environment:
      - REDIS_HOSTS=redis
    ports:
      - 8081:8081


volumes:
  chain:
